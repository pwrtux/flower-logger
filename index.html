<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SaftSafari</title>
    <script src="https://unpkg.com/htmx.org@2.0.1"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-in': 'slideIn 0.5s ease-out',
                        'bounce-in': 'bounceIn 0.5s ease-out'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideIn: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        bounceIn: {
                            '0%': { transform: 'scale(0.8)', opacity: '0' },
                            '70%': { transform: 'scale(1.05)', opacity: '0.7' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen bg-base-200 flex items-center justify-center p-4">
    <div class="card w-full max-w-2xl bg-base-100 shadow-xl">
        <div class="card-body">
            <h1 class="card-title text-6xl sm:text-5xl font-bold mb-2 text-primary justify-center">SaftSafari</h1>
            <p class="text-center text-base-content opacity-70 mb-6">Dein Pflanzenbewässerungs-Logger</p>
            
            <div id="plant-list" class="space-y-4 mb-6">
                <!-- Pflanzenliste wird hier eingefügt -->
            </div>
            
            <form id="add-plant-form" class="form-control w-full max-w-full">
                <div class="input-group w-full">
                    <input type="text" name="plant-name" placeholder="Pflanzennamen eingeben" class="input input-bordered flex-grow w-full mb-4" />
                    <button type="submit" class="btn btn-primary w-full max-w-full">Pflanze hinzufügen</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let plants = [];

        function savePlantsToLocalStorage() {
            localStorage.setItem('plants', JSON.stringify(plants));
        }

        function loadPlantsFromLocalStorage() {
            const storedPlants = localStorage.getItem('plants');
            if (storedPlants) {
                plants = JSON.parse(storedPlants);
                renderPlants();
            }
        }

        function renderPlants() {
            const plantList = document.getElementById('plant-list');
            plantList.innerHTML = '';
            plants.forEach((plant, index) => {
                const plantItem = createPlantItem(plant.name, plant.lastWatered, index);
                plantList.appendChild(plantItem);
            });
        }

        function createPlantItem(name, lastWatered, index) {
            const div = document.createElement('div');
            div.className = 'flex flex-col sm:flex-row items-center justify-between bg-base-200 p-4 rounded-lg';
            div.innerHTML = `
                <span class="font-semibold text-base-content flex-grow mb-2 sm:mb-0">${name}</span>
                <div class="flex items-center space-x-2">
                    <button onclick="waterPlant(${index})" class="btn btn-circle btn-ghost">
                        <i class="fas fa-tint text-2xl ${lastWatered ? 'text-primary' : 'text-base-content opacity-50'}"></i>
                    </button>
                    ${lastWatered ? `<span class="text-sm text-base-content opacity-70">Zuletzt: ${lastWatered}</span>` : ''}
                    <button onclick="deletePlant(${index})" class="btn btn-circle btn-ghost text-error">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            return div;
        }

        function waterPlant(index) {
            const now = new Date();
            const germanDate = now.toLocaleDateString('de-DE', { 
                year: 'numeric', 
                month: '2-digit', 
                day: '2-digit' 
            });
            plants[index].lastWatered = germanDate;
            savePlantsToLocalStorage();
            renderPlants();
        }

        function addPlant(name) {
            plants.push({ name: name, lastWatered: null });
            savePlantsToLocalStorage();
            renderPlants();
        }

        function deletePlant(index) {
            plants.splice(index, 1);
            savePlantsToLocalStorage();
            renderPlants();
        }

        document.addEventListener('DOMContentLoaded', (event) => {
            const form = document.getElementById('add-plant-form');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                const plantName = e.target.elements['plant-name'].value;
                if (plantName) {
                    addPlant(plantName);
                    e.target.reset();
                }
            });

            loadPlantsFromLocalStorage();
        });
    </script>
</body>
</html>